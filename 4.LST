Turbo Assembler	 Version 2.51	     12/05/21 02:54:14	    Page 1
4.asm



      1	    0000			 STSEG SEGMENT PARA STACK "STACK"
      2	    0000  40*(53 54 41 43 4B)	 DB 64 DUP("STACK")
      3	    0140			 STSEG ENDS
      4
      5	    0000			 DSEG SEGMENT PARA PUBLIC "DATA"
      6	    0000  48 49	2C 20 49 4E 50+	 STARTMESSAGE DB 'HI, INPUT ARRAY SIZE FROM 1 T0 5 $'
      7		  55 54	20 41 52 52 41+
      8		  59 20	53 49 5A 45 20+
      9		  46 52	4F 4D 20 31 20+
     10		  54 30	20 35 20 24
     11	    0022  4F 4F	4F 50 53 2C 20+	 ERRORMESSAGE DB 'OOOPS, WRONG DATA$'
     12		  57 52	4F 4E 47 20 44+
     13		  41 54	41 24
     14	    0034  59 4F	55 52 20 53 54+	 MASMESSAGE DB 'YOUR START ARRAY: $'
     15		  41 52	54 20 41 52 52+
     16		  41 59	3A 20 24
     17	    0047  49 4E	50 55 54 20 59+	 INPUTMASMESSAGE DB 'INPUT YOUR	ELEMENTS WITH PRESSING ENTER: $'
     18		  4F 55	52 20 45 4C 45+
     19		  4D 45	4E 54 53 20 57+
     20		  49 54	48 20 50 52 45+
     21		  53 53	49 4E 47 20 45+
     22		  4E 54	45 52 3A 20 24
     23	    0071  4F 56	45 52 46 4C 4F+	 SUMOVERFLOWMESSAGE DB 'OVERFLOW WHILE SUM $'
     24		  57 20	57 48 49 4C 45+
     25		  20 53	55 4D 20 24
     26
     27	    0085  07 ??	07*(0A)		 NUMBERSTR DB 7,?,7 DUP(0AH)
     28
     29	    008E  05*(0000)		 MAS DW	5 DUP(0)
     30
     31	    0098  0000			 NUMBER	DW 0
     32	    009A  0000			 TEMPCX	DW 0
     33	    009C  0000			 TEMPSI	DW 0
     34	    009E  0000			 NUMBERELEMENTS	DW 0
     35	    00A0  0000			 SUM DW	0
     36	    00A2  0000			 SUMOVERFLOW DW	0
     37
     38	    00A4  0000			 NUMBERTOPRINT DW 0
     39
     40	    00A6  0001			 CONVERTATIONCORRECT DW	1
     41
     42
     43		  = -8000		 MINNUM	EQU -32768
     44		  = 0000		 TOCOMP	EQU 0
     45
     46	    00A8			 DSEG ENDS
     47
     48	    0000			 CSEG SEGMENT PARA PUBLIC "CODE"
     49					 .386
     50
     51					 ASSUME	CS:CSEG, DS:DSEG, SS:STSEG
     52
     53	    0000			 MAIN PROC FAR
     54
     55	    0000  1E			 PUSH DS
     56	    0001  33 C0			 XOR AX,AX
     57	    0003  50			 PUSH AX
Turbo Assembler	 Version 2.51	     12/05/21 02:54:14	    Page 2
4.asm



     58					 ;INITIALIZATION OF DS
     59	    0004  B8 0000s		 MOV AX,DSEG
     60	    0007  8E D8			 MOV DS,AX
     61
     62	    0009  BA 0000r		 LEA DX, STARTMESSAGE
     63	    000C  B4 09			 MOV AH,9H
     64	    000E  CD 21			 INT 21H
     65
     66					 ;INPUT	SIZE
     67	    0010  B4 0A			 MOV AH, 0AH
     68	    0012  BA 0085r		 LEA DX, NUMBERSTR
     69	    0015  CD 21			 INT 21H
     70	    0017  E8 00CB		 CALL PRINTNEWLINE
     71
     72	    001A  E8 00DC		 CALL CONVERTATION
     73	    001D  83 3E	00A6r 01	 CMP CONVERTATIONCORRECT, 1
     74	    0022  75 39	90 90		 JNE INCORRECT
     75	    0026  8B 0E	0098r		 MOV CX, NUMBER
     76	    002A  89 0E	009Er		 MOV NUMBERELEMENTS, CX
     77	    002E  BE 0000		 MOV SI, 0
     78	    0031  E8 002A		 CALL INPUTMAS
     79	    0034  BE 0000		 MOV SI, 0
     80	    0037  8B 0E	009Er		 MOV CX, NUMBERELEMENTS
     81	    003B  E8 005D		 CALL PRINTMAS
     82	    003E  BE 0000		 MOV SI, 0
     83	    0041  8B 0E	009Er		 MOV CX, NUMBERELEMENTS
     84	    0045  E8 007A		 CALL FINDSUM
     85	    0048  83 3E	00A2r 00	 CMP SUMOVERFLOW, 0
     86	    004D  75 0E	90 90		 JNE INCORRECT
     87	    0051  A1 00A0r		 MOV AX, SUM
     88	    0054  A3 00A4r		 MOV NUMBERTOPRINT, AX
     89	    0057  E8 008B		 CALL PRINTNEWLINE
     90	    005A  E8 00FA		 CALL PRINTNUMBER
     91	    005D			 INCORRECT:
     92	    005D  CB			 RET
     93
     94	    005E			 MAIN ENDP
     95
     96
     97	    005E			 INPUTMAS PROC NEAR
     98	    005E  BA 0047r		 LEA DX, INPUTMASMESSAGE
     99	    0061  B4 09			 MOV AH, 9H
    100	    0063  CD 21			 INT 21H
    101	    0065  E8 007D		 CALL PRINTNEWLINE
    102	    0068			 INPUTEL:
    103	    0068  89 0E	009Ar		 MOV TEMPCX, CX
    104	    006C  B4 0A			 MOV AH, 0AH
    105	    006E  BA 0085r		 LEA DX, NUMBERSTR
    106	    0071  CD 21			 INT 21H
    107	    0073  89 36	009Cr		 MOV TEMPSI, SI
    108	    0077  E8 006B		 CALL PRINTNEWLINE
    109	    007A  E8 007C		 CALL CONVERTATION
    110	    007D  8B 36	009Cr		 MOV SI, TEMPSI
    111	    0081  83 3E	00A6r 01	 CMP CONVERTATIONCORRECT, 1
    112	    0086  75 12	90 90		 JNE INCORRECTINPUT
    113	    008A  A1 0098r		 MOV AX, NUMBER
    114	    008D  89 84	008Er		 MOV MAS[SI], AX
Turbo Assembler	 Version 2.51	     12/05/21 02:54:14	    Page 3
4.asm



    115	    0091  8B 0E	009Ar		 MOV CX, TEMPCX
    116	    0095  83 C6	02		 ADD SI, 2
    117	    0098  E2 CE			 LOOP INPUTEL
    118	    009A			 INCORRECTINPUT:
    119	    009A  C3			 RET
    120	    009B			 INPUTMAS ENDP
    121
    122	    009B			 PRINTMAS PROC NEAR
    123	    009B  BA 0034r		 LEA DX, MASMESSAGE
    124	    009E  B4 09			 MOV AH, 9H
    125	    00A0  CD 21			 INT 21H
    126	    00A2  E8 0040		 CALL PRINTNEWLINE
    127	    00A5			 PRINTEL:
    128	    00A5  89 0E	009Ar		 MOV TEMPCX, CX
    129	    00A9  8B 94	008Er		 MOV DX, MAS[SI]
    130	    00AD  89 16	00A4r		 MOV NUMBERTOPRINT, DX
    131	    00B1  E8 00A3		 CALL PRINTNUMBER
    132	    00B4  B0 20			 MOV AL, ' '
    133	    00B6  CD 29			 INT 29H
    134	    00B8  83 C6	02		 ADD SI, 2
    135	    00BB  8B 0E	009Ar		 MOV CX, TEMPCX
    136	    00BF  E2 E4			 LOOP PRINTEL
    137	    00C1  C3			 RET
    138	    00C2			 PRINTMAS ENDP
    139
    140
    141	    00C2			 FINDSUM PROC NEAR
    142	    00C2			 SUMMA:
    143	    00C2  8B 94	008Er		 MOV DX, MAS[SI]
    144	    00C6  01 16	00A0r		 ADD SUM, DX
    145	    00CA  70 08	90 90		 JO OF
    146	    00CE  83 C6	02		 ADD SI, 2
    147	    00D1  E2 EF			 LOOP SUMMA
    148	    00D3  C3			 RET
    149	    00D4			 OF:
    150	    00D4  E8 000E		 CALL PRINTNEWLINE
    151	    00D7  BA 0071r		 LEA DX, SUMOVERFLOWMESSAGE
    152	    00DA  B4 09			 MOV AH,9H
    153	    00DC  CD 21			 INT 21H
    154	    00DE  C7 06	00A2r 0001	 MOV SUMOVERFLOW, 1
    155	    00E4  C3			 RET
    156	    00E5			 FINDSUM ENDP
    157
    158
    159	    00E5			 PRINTNEWLINE PROC NEAR
    160	    00E5  B0 0A			 MOV AL, 0AH
    161	    00E7  CD 29			 INT 29H
    162	    00E9  B0 0D			 MOV AL, 13
    163	    00EB  CD 29			 INT 29H
    164	    00ED  C3			 RET
    165	    00EE			 PRINTNEWLINE ENDP
    166
    167	    00EE			 PRINTERROR PROC NEAR
    168	    00EE  BA 0022r		 LEA DX, ERRORMESSAGE
    169	    00F1  B4 09			 MOV AH, 9H
    170	    00F3  CD 21			 INT 21H
    171	    00F5  E8 FFED		 CALL PRINTNEWLINE
Turbo Assembler	 Version 2.51	     12/05/21 02:54:14	    Page 4
4.asm



    172	    00F8  C3			 RET
    173	    00F9			 PRINTERROR ENDP
    174
    175	    00F9			 CONVERTATION PROC NEAR
    176					 ;CONVERT TO NUMBER
    177	    00F9  BE 0087r		 LEA SI, NUMBERSTR +2
    178	    00FC  80 3C	2D		 CMP BYTE PTR [SI], "-"
    179	    00FF  75 03	90 90		 JNE A1
    180	    0103  46			 INC SI
    181
    182	    0104			 A1:
    183	    0104  33 C0			 XOR AX,AX
    184	    0106  BB 000A		 MOV BX,10
    185
    186	    0109			 A2:
    187	    0109  8A 0C			 MOV CL, [SI]
    188	    010B  80 F9	0D		 CMP CL, 0DH
    189	    010E  74 38	90 90		 JZ NEGATIVE
    190
    191	    0112  80 F9	30		 CMP CL,'0'
    192	    0115  72 1B	90 90		 JB ERROR
    193	    0119  80 F9	39		 CMP CL, '9'
    194	    011C  77 14	90 90		 JA ERROR
    195
    196	    0120  80 E9	30		 SUB CL, '0'
    197	    0123  F7 EB			 IMUL BX
    198	    0125  70 0B	90 90		 JO ERROR
    199	    0129  03 C1			 ADD AX, CX
    200	    012B  70 0F	90 90		 JO MIN
    201	    012F  46			 INC SI
    202	    0130  EB D7			 JMP A2
    203	    0132			 ERROR:
    204	    0132  E8 FFB9		 CALL PRINTERROR
    205	    0135  C7 06	00A6r 0000	 MOV CONVERTATIONCORRECT, 0
    206	    013B  C3			 RET
    207	    013C			 MIN:
    208	    013C  3D 8000		 CMP AX, MINNUM
    209	    013F  75 F1			 JNE ERROR
    210	    0141  80 3E	0087r 2D	 CMP BYTE PTR [NUMBERSTR + 2], "-"
    211	    0146  75 EA			 JNE ERROR
    212	    0148			 NEGATIVE:
    213	    0148  80 3E	0087r 2D	 CMP BYTE PTR [NUMBERSTR + 2], "-"
    214	    014D  75 04	90 90		 JNE A3
    215	    0151  F7 D8			 NEG AX
    216	    0153			 A3:
    217	    0153  A3 0098r		 MOV NUMBER,AX
    218	    0156  C3			 RET
    219	    0157			 CONVERTATION ENDP
    220
    221
    222
    223
    224	    0157			 PRINTNUMBER PROC NEAR
    225	    0157  8B 1E	00A4r		 MOV BX, NUMBERTOPRINT
    226	    015B  0B DB			 OR BX,BX
    227	    015D  79 08	90 90		 JNS M1
    228	    0161  B0 2D			 MOV AL, '-'
Turbo Assembler	 Version 2.51	     12/05/21 02:54:14	    Page 5
4.asm



    229	    0163  CD 29			 INT 29H
    230	    0165  F7 DB			 NEG BX
    231
    232	    0167			 M1:
    233	    0167  8B C3			 MOV AX,BX
    234	    0169  33 C9			 XOR CX, CX
    235	    016B  BB 000A		 MOV BX, 10
    236
    237	    016E			 M2:
    238	    016E  33 D2			 XOR DX,DX
    239	    0170  F7 F3			 DIV BX
    240	    0172  80 C2	30		 ADD DL, '0'
    241	    0175  52			 PUSH DX
    242	    0176  41			 INC CX
    243	    0177  85 C0			 TEST AX,AX
    244	    0179  75 F3			 JNZ M2
    245
    246	    017B			 M3:
    247	    017B  58			 POP AX
    248	    017C  CD 29			 INT 29H
    249	    017E  E2 FB			 LOOP M3
    250	    0180  C3			 RET
    251	    0181			 PRINTNUMBER ENDP
    252
    253
    254	    0181			 CSEG ENDS
    255					 END MAIN
Turbo Assembler	 Version 2.51	     12/05/21 02:54:14	    Page 6
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "12/05/21"
??FILENAME			  Text	 "4	  "
??TIME				  Text	 "02:54:14"
??VERSION			  Number 0205
@CPU				  Text	 0D0FH
@CURSEG				  Text	 CSEG
@FILENAME			  Text	 4
@WORDSIZE			  Text	 4
A1				  Near	 CSEG:0104
A2				  Near	 CSEG:0109
A3				  Near	 CSEG:0153
CONVERTATION			  Near	 CSEG:00F9
CONVERTATIONCORRECT		  Word	 DSEG:00A6
ERROR				  Near	 CSEG:0132
ERRORMESSAGE			  Byte	 DSEG:0022
FINDSUM				  Near	 CSEG:00C2
INCORRECT			  Near	 CSEG:005D
INCORRECTINPUT			  Near	 CSEG:009A
INPUTEL				  Near	 CSEG:0068
INPUTMAS			  Near	 CSEG:005E
INPUTMASMESSAGE			  Byte	 DSEG:0047
M1				  Near	 CSEG:0167
M2				  Near	 CSEG:016E
M3				  Near	 CSEG:017B
MAIN				  Far	 CSEG:0000
MAS				  Word	 DSEG:008E
MASMESSAGE			  Byte	 DSEG:0034
MIN				  Near	 CSEG:013C
MINNUM				  Number -8000
NEGATIVE			  Near	 CSEG:0148
NUMBER				  Word	 DSEG:0098
NUMBERELEMENTS			  Word	 DSEG:009E
NUMBERSTR			  Byte	 DSEG:0085
NUMBERTOPRINT			  Word	 DSEG:00A4
OF				  Near	 CSEG:00D4
PRINTEL				  Near	 CSEG:00A5
PRINTERROR			  Near	 CSEG:00EE
PRINTMAS			  Near	 CSEG:009B
PRINTNEWLINE			  Near	 CSEG:00E5
PRINTNUMBER			  Near	 CSEG:0157
STARTMESSAGE			  Byte	 DSEG:0000
SUM				  Word	 DSEG:00A0
SUMMA				  Near	 CSEG:00C2
SUMOVERFLOW			  Word	 DSEG:00A2
SUMOVERFLOWMESSAGE		  Byte	 DSEG:0071
TEMPCX				  Word	 DSEG:009A
TEMPSI				  Word	 DSEG:009C
TOCOMP				  Number 0000

Groups & Segments		  Bit Size Align  Combine Class

CSEG				  16  0181 Para	  Public  CODE
DSEG				  16  00A8 Para	  Public  DATA
STSEG				  16  0140 Para	  Stack	  STACK
