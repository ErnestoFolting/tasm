Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 1
4.asm



      1	    0000			 STSEG SEGMENT PARA STACK "STACK"
      2	    0000  40*(53 54 41 43 4B)	 DB 64 DUP("STACK")
      3	    0140			 STSEG ENDS
      4
      5	    0000			 DSEG SEGMENT PARA PUBLIC "DATA"
      6	    0000  48 49	2C 20 49 4E 50+	 STARTMESSAGE DB 'HI, INPUT ARRAY SIZE FROM 1 T0 10 $'
      7		  55 54	20 41 52 52 41+
      8		  59 20	53 49 5A 45 20+
      9		  46 52	4F 4D 20 31 20+
     10		  54 30	20 31 30 20 24
     11	    0023  4F 4F	4F 50 53 2C 20+	 ERRORMESSAGE DB 'OOOPS, WRONG DATA, ONLY FROM -32768 to 32767$'
     12		  57 52	4F 4E 47 20 44+
     13		  41 54	41 2C 20 4F 4E+
     14		  4C 59	20 46 52 4F 4D+
     15		  20 2D	33 32 37 36 38+
     16		  20 74	6F 20 33 32 37+
     17		  36 37	24
     18	    0050  59 4F	55 52 20 53 54+	 MASMESSAGE DB 'YOUR START ARRAY: $'
     19		  41 52	54 20 41 52 52+
     20		  41 59	3A 20 24
     21	    0063  49 4E	50 55 54 20 59+	 INPUTMASMESSAGE DB 'INPUT YOUR	ELEMENTS WITH PRESSING ENTER, BY DEFAULT 0: $'
     22		  4F 55	52 20 45 4C 45+
     23		  4D 45	4E 54 53 20 57+
     24		  49 54	48 20 50 52 45+
     25		  53 53	49 4E 47 20 45+
     26		  4E 54	45 52 2C 20 42+
     27		  59 20	44 45 46 41 55+
     28		  4C 54	20 30 3A 20 24
     29	    009B  4F 56	45 52 46 4C 4F+	 SUMOVERFLOWMESSAGE DB 'OVERFLOW WHILE SUM $'
     30		  57 20	57 48 49 4C 45+
     31		  20 53	55 4D 20 24
     32	    00AF  54 48	45 20 53 55 4D+	 SUMMESSAGE DB 'THE SUMM OF ELEMENTS: $'
     33		  4D 20	4F 46 20 45 4C+
     34		  45 4D	45 4E 54 53 3A+
     35		  20 24
     36	    00C6  54 48	45 20 4D 41 58+	 MAXMESSAGE DB 'THE MAX	ELEMENT: $'
     37		  20 45	4C 45 4D 45 4E+
     38		  54 3A	20 24
     39	    00D8  53 4F	52 54 45 44 20+	 SORTMESSAGE DB	'SORTED	ARRAY: $'
     40		  41 52	52 41 59 3A 20+
     41		  24
     42	    00E7  49 4E	43 4F 52 52 45+	 SIZEERRORMESSAGE DB 'INCORRECT	SIZE OF	ARRAY $'
     43		  43 54	20 53 49 5A 45+
     44		  20 4F	46 20 41 52 52+
     45		  41 59	20 24
     46
     47	    0100  07 ??	07*(0A)		 NUMBERSTR DB 7,?,7 DUP(0AH)
     48
     49	    0109  0A*(0000)		 MAS DW	10 DUP(0)
     50
     51	    011D  0000			 NUMBER	DW 0
     52	    011F  0000			 TEMPCX	DW 0
     53	    0121  0000			 TEMPSI	DW 0
     54	    0123  0000			 NUMBERELEMENTS	DW 0
     55	    0125  0000			 SUM DW	0
     56	    0127  0000			 MAXEL DW 0
     57	    0129  0000			 I DW 0
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 2
4.asm



     58	    012B  0000			 J DW 0
     59	    012D  0000			 SUMOVERFLOW DW	0
     60	    012F  0000			 INPUTOVERFLOW DW 0
     61
     62	    0131  0000			 NUMBERTOPRINT DW 0
     63
     64	    0133  0001			 CONVERTATIONCORRECT DW	1
     65
     66
     67		  = -8000		 MINNUM	EQU -32768
     68		  = 0000		 TOCOMP	EQU 0
     69
     70	    0135			 DSEG ENDS
     71
     72	    0000			 CSEG SEGMENT PARA PUBLIC "CODE"
     73					 .386
     74
     75					 ASSUME	CS:CSEG, DS:DSEG, SS:STSEG
     76
     77	    0000			 MAIN PROC FAR
     78
     79	    0000  1E			 PUSH DS
     80	    0001  33 C0			 XOR AX,AX
     81	    0003  50			 PUSH AX
     82					 ;INITIALIZATION OF DS
     83	    0004  B8 0000s		 MOV AX,DSEG
     84	    0007  8E D8			 MOV DS,AX
     85
     86	    0009  BA 0000r		 LEA DX, STARTMESSAGE
     87	    000C  B4 09			 MOV AH,9H
     88	    000E  CD 21			 INT 21H
     89
     90					 ;INPUT	SIZE
     91	    0010  B4 0A			 MOV AH, 0AH
     92	    0012  BA 0100r		 LEA DX, NUMBERSTR
     93	    0015  CD 21			 INT 21H
     94	    0017  E8 01A3		 CALL PRINTNEWLINE
     95
     96	    001A  E8 01B4		 CALL CONVERTATION
     97	    001D  83 3E	0133r 01	 CMP CONVERTATIONCORRECT, 1
     98	    0022  0F 85	00A6		 JNE INCORRECTSIZE
     99	    0026  83 3E	011Dr 00	 CMP NUMBER, 0
    100	    002B  0F 8E	009D		 JLE INCORRECTSIZE
    101	    002F  B8 000B		 MOV AX, 11
    102	    0032  3B 06	011Dr		 CMP AX, NUMBER
    103	    0036  0F 8E	0092		 JLE INCORRECTSIZE
    104	    003A  8B 0E	011Dr		 MOV CX, NUMBER
    105	    003E  89 0E	0123r		 MOV NUMBERELEMENTS, CX
    106	    0042  BE 0000		 MOV SI, 0
    107	    0045  E8 0090		 CALL INPUTMAS
    108	    0048  83 3E	012Fr 01	 CMP INPUTOVERFLOW, 1
    109	    004D  0F 84	0086		 JE INCORRECT
    110	    0051  BE 0000		 MOV SI, 0
    111	    0054  8B 0E	0123r		 MOV CX, NUMBERELEMENTS
    112	    0058  BA 0050r		 LEA DX, MASMESSAGE
    113	    005B  B4 09			 MOV AH, 9H
    114	    005D  CD 21			 INT 21H
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 3
4.asm



    115	    005F  E8 015B		 CALL PRINTNEWLINE
    116	    0062  E8 00B7		 CALL PRINTMAS
    117	    0065  BE 0000		 MOV SI, 0
    118	    0068  8B 0E	0123r		 MOV CX, NUMBERELEMENTS
    119	    006C  E8 00CA		 CALL FINDSUM
    120	    006F  83 3E	012Dr 00	 CMP SUMOVERFLOW, 0
    121	    0074  75 61	90 90		 JNE INCORRECT
    122	    0078  A1 0125r		 MOV AX, SUM
    123	    007B  A3 0131r		 MOV NUMBERTOPRINT, AX
    124	    007E  E8 013C		 CALL PRINTNEWLINE
    125	    0081  BA 00AFr		 LEA DX, SUMMESSAGE
    126	    0084  B4 09			 MOV AH, 9H
    127	    0086  CD 21			 INT 21H
    128	    0088  E8 0132		 CALL PRINTNEWLINE
    129	    008B  E8 01A1		 CALL PRINTNUMBER
    130	    008E  BE 0000		 MOV SI, 0
    131	    0091  8B 0E	0123r		 MOV CX, NUMBERELEMENTS
    132	    0095  E8 00C4		 CALL FINDMAX
    133	    0098  A1 0127r		 MOV AX, MAXEL
    134	    009B  A3 0131r		 MOV NUMBERTOPRINT, AX
    135	    009E  E8 011C		 CALL PRINTNEWLINE
    136	    00A1  BA 00C6r		 LEA DX, MAXMESSAGE
    137	    00A4  B4 09			 MOV AH, 9H
    138	    00A6  CD 21			 INT 21H
    139	    00A8  E8 0112		 CALL PRINTNEWLINE
    140	    00AB  E8 0181		 CALL PRINTNUMBER
    141	    00AE  BE 0000		 MOV SI, 0
    142	    00B1  E8 00C5		 CALL SORTMAS
    143	    00B4  E8 0106		 CALL PRINTNEWLINE
    144	    00B7  BA 00D8r		 LEA DX, SORTMESSAGE
    145	    00BA  B4 09			 MOV AH, 9H
    146	    00BC  CD 21			 INT 21H
    147	    00BE  BE 0000		 MOV SI, 0
    148	    00C1  8B 0E	0123r		 MOV CX, NUMBERELEMENTS
    149	    00C5  E8 00F5		 CALL PRINTNEWLINE
    150	    00C8  E8 0051		 CALL PRINTMAS
    151
    152	    00CB  CB			 RET
    153	    00CC			 INCORRECTSIZE:
    154	    00CC  E8 00EE		 CALL PRINTNEWLINE
    155	    00CF  BA 00E7r		 LEA DX, SIZEERRORMESSAGE
    156	    00D2  B4 09			 MOV AH,9H
    157	    00D4  CD 21			 INT 21H
    158	    00D6  CB			 RET
    159	    00D7			 INCORRECT:
    160	    00D7  CB			 RET
    161
    162	    00D8			 MAIN ENDP
    163
    164
    165	    00D8			 INPUTMAS PROC NEAR
    166	    00D8  BA 0063r		 LEA DX, INPUTMASMESSAGE
    167	    00DB  B4 09			 MOV AH, 9H
    168	    00DD  CD 21			 INT 21H
    169	    00DF  E8 00DB		 CALL PRINTNEWLINE
    170	    00E2			 INPUTEL:
    171	    00E2  89 0E	011Fr		 MOV TEMPCX, CX
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 4
4.asm



    172	    00E6  B4 0A			 MOV AH, 0AH
    173	    00E8  BA 0100r		 LEA DX, NUMBERSTR
    174	    00EB  CD 21			 INT 21H
    175	    00ED  89 36	0121r		 MOV TEMPSI, SI
    176	    00F1  E8 00C9		 CALL PRINTNEWLINE
    177	    00F4  E8 00DA		 CALL CONVERTATION
    178	    00F7  8B 36	0121r		 MOV SI, TEMPSI
    179	    00FB  83 3E	0133r 01	 CMP CONVERTATIONCORRECT, 1
    180	    0100  75 13	90 90		 JNE INCORRECTINPUT
    181	    0104  A1 011Dr		 MOV AX, NUMBER
    182	    0107  89 84	0109r		 MOV MAS[SI], AX
    183	    010B  8B 0E	011Fr		 MOV CX, TEMPCX
    184	    010F  83 C6	02		 ADD SI, 2
    185	    0112  E2 CE			 LOOP INPUTEL
    186	    0114  C3			 RET
    187	    0115			 INCORRECTINPUT:
    188	    0115  C7 06	012Fr 0001	 MOV INPUTOVERFLOW, 1
    189	    011B  C3			 RET
    190	    011C			 INPUTMAS ENDP
    191
    192	    011C			 PRINTMAS PROC NEAR
    193	    011C			 PRINTEL:
    194	    011C  89 0E	011Fr		 MOV TEMPCX, CX
    195	    0120  8B 94	0109r		 MOV DX, MAS[SI]
    196	    0124  89 16	0131r		 MOV NUMBERTOPRINT, DX
    197	    0128  E8 0104		 CALL PRINTNUMBER
    198	    012B  B0 20			 MOV AL, ' '
    199	    012D  CD 29			 INT 29H
    200	    012F  83 C6	02		 ADD SI, 2
    201	    0132  8B 0E	011Fr		 MOV CX, TEMPCX
    202	    0136  E2 E4			 LOOP PRINTEL
    203	    0138  C3			 RET
    204	    0139			 PRINTMAS ENDP
    205
    206
    207	    0139			 FINDSUM PROC NEAR
    208	    0139			 SUMMA:
    209	    0139  8B 94	0109r		 MOV DX, MAS[SI]
    210	    013D  01 16	0125r		 ADD SUM, DX
    211	    0141  70 08	90 90		 JO OF
    212	    0145  83 C6	02		 ADD SI, 2
    213	    0148  E2 EF			 LOOP SUMMA
    214	    014A  C3			 RET
    215	    014B			 OF:
    216	    014B  E8 006F		 CALL PRINTNEWLINE
    217	    014E  BA 009Br		 LEA DX, SUMOVERFLOWMESSAGE
    218	    0151  B4 09			 MOV AH,9H
    219	    0153  CD 21			 INT 21H
    220	    0155  C7 06	012Dr 0001	 MOV SUMOVERFLOW, 1
    221	    015B  C3			 RET
    222	    015C			 FINDSUM ENDP
    223
    224	    015C			 FINDMAX PROC NEAR
    225	    015C  8B 84	0109r		 MOV AX, MAS[SI]
    226	    0160  A3 0127r		 MOV MAXEL, AX
    227	    0163			 MAX:
    228	    0163  8B 94	0109r		 MOV DX, MAS[SI]
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 5
4.asm



    229	    0167  3B 16	0127r		 CMP DX, MAXEL
    230	    016B  7E 06	90 90		 JLE NOTBIGGER
    231	    016F  89 16	0127r		 MOV MAXEL, DX
    232	    0173			 NOTBIGGER:
    233	    0173  83 C6	02		 ADD SI, 2
    234	    0176  E2 EB			 LOOP MAX
    235	    0178  C3			 RET
    236	    0179			 FINDMAX ENDP
    237
    238	    0179			 SORTMAS PROC NEAR
    239	    0179  83 3E	0123r 01	 CMP NUMBERELEMENTS, 1
    240	    017E  74 3C	90 90		 JE ELEMENT
    241	    0182  A1 0123r		 MOV AX, NUMBERELEMENTS
    242	    0185  A3 0129r		 MOV I,	AX
    243	    0188  48			 DEC AX
    244	    0189  A3 012Br		 MOV J,	AX
    245	    018C  8B 0E	0129r		 MOV CX, I
    246	    0190			 EXTERNAL:
    247
    248	    0190  89 0E	011Fr		 MOV TEMPCX, CX
    249	    0194  8B 0E	012Br		 MOV CX, J
    250	    0198			 INTERNAL:
    251	    0198  8B 84	0109r		 MOV AX, MAS[SI]
    252	    019C  8B 9C	010Br		 MOV BX, MAS[SI+2]
    253	    01A0  3B C3			 CMP AX, BX
    254	    01A2  7E 0A	90 90		 JLE LOWER
    255	    01A6  89 9C	0109r		 MOV MAS[SI], BX
    256	    01AA  89 84	010Br		 MOV MAS[SI+2],	AX
    257	    01AE			 LOWER:
    258	    01AE  83 C6	02		 ADD SI, 2
    259	    01B1  E2 E5			 LOOP INTERNAL
    260	    01B3  BE 0000		 MOV SI, 0
    261	    01B6  8B 0E	011Fr		 MOV CX, TEMPCX
    262
    263	    01BA  E2 D4			 LOOP EXTERNAL
    264	    01BC			 ELEMENT:
    265	    01BC  C3			 RET
    266	    01BD			 SORTMAS ENDP
    267
    268
    269	    01BD			 PRINTNEWLINE PROC NEAR
    270	    01BD  B0 0A			 MOV AL, 0AH
    271	    01BF  CD 29			 INT 29H
    272	    01C1  B0 0D			 MOV AL, 13
    273	    01C3  CD 29			 INT 29H
    274	    01C5  C3			 RET
    275	    01C6			 PRINTNEWLINE ENDP
    276
    277	    01C6			 PRINTERROR PROC NEAR
    278	    01C6  BA 0023r		 LEA DX, ERRORMESSAGE
    279	    01C9  B4 09			 MOV AH, 9H
    280	    01CB  CD 21			 INT 21H
    281	    01CD  E8 FFED		 CALL PRINTNEWLINE
    282	    01D0  C3			 RET
    283	    01D1			 PRINTERROR ENDP
    284
    285	    01D1			 CONVERTATION PROC NEAR
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 6
4.asm



    286					 ;CONVERT TO NUMBER
    287	    01D1  BE 0102r		 LEA SI, NUMBERSTR +2
    288	    01D4  80 3C	2D		 CMP BYTE PTR [SI], "-"
    289	    01D7  75 03	90 90		 JNE A1
    290	    01DB  46			 INC SI
    291
    292	    01DC			 A1:
    293	    01DC  33 C0			 XOR AX,AX
    294	    01DE  BB 000A		 MOV BX,10
    295
    296	    01E1			 A2:
    297	    01E1  8A 0C			 MOV CL, [SI]
    298	    01E3  80 F9	0D		 CMP CL, 0DH
    299	    01E6  74 38	90 90		 JZ NEGATIVE
    300
    301	    01EA  80 F9	30		 CMP CL,'0'
    302	    01ED  72 1B	90 90		 JB ERROR
    303	    01F1  80 F9	39		 CMP CL, '9'
    304	    01F4  77 14	90 90		 JA ERROR
    305
    306	    01F8  80 E9	30		 SUB CL, '0'
    307	    01FB  F7 EB			 IMUL BX
    308	    01FD  70 0B	90 90		 JO ERROR
    309	    0201  03 C1			 ADD AX, CX
    310	    0203  70 0F	90 90		 JO MIN
    311	    0207  46			 INC SI
    312	    0208  EB D7			 JMP A2
    313	    020A			 ERROR:
    314	    020A  E8 FFB9		 CALL PRINTERROR
    315	    020D  C7 06	0133r 0000	 MOV CONVERTATIONCORRECT, 0
    316	    0213  C3			 RET
    317	    0214			 MIN:
    318	    0214  3D 8000		 CMP AX, MINNUM
    319	    0217  75 F1			 JNE ERROR
    320	    0219  80 3E	0102r 2D	 CMP BYTE PTR [NUMBERSTR + 2], "-"
    321	    021E  75 EA			 JNE ERROR
    322	    0220			 NEGATIVE:
    323	    0220  80 3E	0102r 2D	 CMP BYTE PTR [NUMBERSTR + 2], "-"
    324	    0225  75 04	90 90		 JNE A3
    325	    0229  F7 D8			 NEG AX
    326	    022B			 A3:
    327	    022B  A3 011Dr		 MOV NUMBER,AX
    328	    022E  C3			 RET
    329	    022F			 CONVERTATION ENDP
    330
    331
    332
    333
    334	    022F			 PRINTNUMBER PROC NEAR
    335	    022F  8B 1E	0131r		 MOV BX, NUMBERTOPRINT
    336	    0233  0B DB			 OR BX,BX
    337	    0235  79 08	90 90		 JNS M1
    338	    0239  B0 2D			 MOV AL, '-'
    339	    023B  CD 29			 INT 29H
    340	    023D  F7 DB			 NEG BX
    341
    342	    023F			 M1:
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 7
4.asm



    343	    023F  8B C3			 MOV AX,BX
    344	    0241  33 C9			 XOR CX, CX
    345	    0243  BB 000A		 MOV BX, 10
    346
    347	    0246			 M2:
    348	    0246  33 D2			 XOR DX,DX
    349	    0248  F7 F3			 DIV BX
    350	    024A  80 C2	30		 ADD DL, '0'
    351	    024D  52			 PUSH DX
    352	    024E  41			 INC CX
    353	    024F  85 C0			 TEST AX,AX
    354	    0251  75 F3			 JNZ M2
    355
    356	    0253			 M3:
    357	    0253  58			 POP AX
    358	    0254  CD 29			 INT 29H
    359	    0256  E2 FB			 LOOP M3
    360	    0258  C3			 RET
    361	    0259			 PRINTNUMBER ENDP
    362
    363
    364	    0259			 CSEG ENDS
    365					 END MAIN
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 8
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "12/05/21"
??FILENAME			  Text	 "4	  "
??TIME				  Text	 "16:18:43"
??VERSION			  Number 0205
@CPU				  Text	 0D0FH
@CURSEG				  Text	 CSEG
@FILENAME			  Text	 4
@WORDSIZE			  Text	 4
A1				  Near	 CSEG:01DC
A2				  Near	 CSEG:01E1
A3				  Near	 CSEG:022B
CONVERTATION			  Near	 CSEG:01D1
CONVERTATIONCORRECT		  Word	 DSEG:0133
ELEMENT				  Near	 CSEG:01BC
ERROR				  Near	 CSEG:020A
ERRORMESSAGE			  Byte	 DSEG:0023
EXTERNAL			  Near	 CSEG:0190
FINDMAX				  Near	 CSEG:015C
FINDSUM				  Near	 CSEG:0139
I				  Word	 DSEG:0129
INCORRECT			  Near	 CSEG:00D7
INCORRECTINPUT			  Near	 CSEG:0115
INCORRECTSIZE			  Near	 CSEG:00CC
INPUTEL				  Near	 CSEG:00E2
INPUTMAS			  Near	 CSEG:00D8
INPUTMASMESSAGE			  Byte	 DSEG:0063
INPUTOVERFLOW			  Word	 DSEG:012F
INTERNAL			  Near	 CSEG:0198
J				  Word	 DSEG:012B
LOWER				  Near	 CSEG:01AE
M1				  Near	 CSEG:023F
M2				  Near	 CSEG:0246
M3				  Near	 CSEG:0253
MAIN				  Far	 CSEG:0000
MAS				  Word	 DSEG:0109
MASMESSAGE			  Byte	 DSEG:0050
MAX				  Near	 CSEG:0163
MAXEL				  Word	 DSEG:0127
MAXMESSAGE			  Byte	 DSEG:00C6
MIN				  Near	 CSEG:0214
MINNUM				  Number -8000
NEGATIVE			  Near	 CSEG:0220
NOTBIGGER			  Near	 CSEG:0173
NUMBER				  Word	 DSEG:011D
NUMBERELEMENTS			  Word	 DSEG:0123
NUMBERSTR			  Byte	 DSEG:0100
NUMBERTOPRINT			  Word	 DSEG:0131
OF				  Near	 CSEG:014B
PRINTEL				  Near	 CSEG:011C
PRINTERROR			  Near	 CSEG:01C6
PRINTMAS			  Near	 CSEG:011C
PRINTNEWLINE			  Near	 CSEG:01BD
PRINTNUMBER			  Near	 CSEG:022F
SIZEERRORMESSAGE		  Byte	 DSEG:00E7
Turbo Assembler	 Version 2.51	     12/05/21 16:18:43	    Page 9
Symbol Table



SORTMAS				  Near	 CSEG:0179
SORTMESSAGE			  Byte	 DSEG:00D8
STARTMESSAGE			  Byte	 DSEG:0000
SUM				  Word	 DSEG:0125
SUMMA				  Near	 CSEG:0139
SUMMESSAGE			  Byte	 DSEG:00AF
SUMOVERFLOW			  Word	 DSEG:012D
SUMOVERFLOWMESSAGE		  Byte	 DSEG:009B
TEMPCX				  Word	 DSEG:011F
TEMPSI				  Word	 DSEG:0121
TOCOMP				  Number 0000

Groups & Segments		  Bit Size Align  Combine Class

CSEG				  16  0259 Para	  Public  CODE
DSEG				  16  0135 Para	  Public  DATA
STSEG				  16  0140 Para	  Stack	  STACK
