Turbo Assembler	 Version 2.51	     12/11/21 14:50:22	    Page 1
2.asm



      1				     INIT_DS MACRO
      2				     PUSH DS
      3				     XOR AX,AX
      4				     PUSH AX
      5				     ;INITIALIZATION OF	DS
      6				     MOV AX,DSEG
      7				     MOV DS,AX
      8				     ENDM
      9
     10				     CALCULATION MACRO
     11				     LOCAL OVERFLOW,ERR
     12				     MOV CORRECT, 1
     13				     ADD NUMBER, 78
     14				     JO	OVERFLOW
     15				     JMP ERR
     16				     OVERFLOW:
     17				     MOV CORRECT, 0
     18				     LEA DX, OFSUM
     19				     MOV AH, 9H
     20				     INT 21H
     21				     ERR:
     22				     ENDM
     23
     24	0000			     STSEG SEGMENT PARA	STACK "STACK"
     25	0000  40*(53 54	41 43 4B)    DB	64 DUP("STACK")
     26	0140			     STSEG ENDS
     27
     28	0000			     DSEG SEGMENT PARA PUBLIC "DATA"
     29	0000  48 49 2C 20 49 4E	50+  STARTMESSAGE DB 'HI, INPUT	A NUMBER FROM -32768 T0	32767, MAX - 6 SYMBOLS:	$'
     30	      55 54 20 41 20 4E	55+
     31	      4D 42 45 52 20 46	52+
     32	      4F 4D 20 2D 33 32	37+
     33	      36 38 20 54 30 20	33+
     34	      32 37 36 37 2C 20	4D+
     35	      41 58 20 2D 20 36	20+
     36	      53 59 4D 42 4F 4C	53+
     37	      3A 20 24
     38	003B  4F 4F 4F 50 53 2C	20+  ERRORMESSAGE DB 'OOOPS, WRONG DATA$'
     39	      57 52 4F 4E 47 20	44+
     40	      41 54 41 24
     41	004D  4F 56 45 52 46 4C	4F+  OFSUM DB 'OVERFLOW	WHILE ADDING 78$'
     42	      57 20 57 48 49 4C	45+
     43	      20 41 44 44 49 4E	47+
     44	      20 37 38 24
     45
     46	0066  00		     NEGFLAG DB	0
     47	0067  00		     CORRECT DB	0
     48	      =	-8000		     MINNUM EQU	-32768
     49	0068  0000		     NUMBER DW 0
     50	006A  07 ?? 07*(0A)	     DUMP DB 7,?,7 DUP(0AH)
     51	0073			     DSEG ENDS
     52
     53	0000			     CSEG SEGMENT PARA PUBLIC "CODE"
     54				     ASSUME CS:CSEG, DS:DSEG, SS:STSEG
     55
     56	0000			     MAIN PROC FAR
     57
Turbo Assembler	 Version 2.51	     12/11/21 14:50:22	    Page 2
2.asm



     58				     INIT_DS
1    59	0000  1E		     PUSH DS
1    60	0001  33 C0		     XOR AX,AX
1    61	0003  50		     PUSH AX
1    62	0004  B8 0000s		     MOV AX,DSEG
1    63	0007  8E D8		     MOV DS,AX
     64
     65	0009  BA 0000r		     LEA DX, STARTMESSAGE
     66	000C  B4 09		     MOV AH,9H
     67	000E  CD 21		     INT 21H
     68
     69
     70				     ;INPUT SYMBOLS
     71	0010  B4 0A		     MOV AH, 0AH
     72	0012  BA 006Ar		     LEA DX, DUMP
     73	0015  CD 21		     INT 21H
     74	0017  B0 0A		     MOV AL, 0AH
     75	0019  CD 29		     INT 29H
     76
     77				     ;CONVERT TO NUMBER
     78	001B  BE 006Cr		     LEA SI, DUMP +2
     79	001E  80 3C 2D		     CMP BYTE PTR [SI],	"-"
     80	0021  75 06		     JNZ A1
     81	0023  C6 06 0066r 01	     MOV NEGFLAG,1
     82	0028  46		     INC SI
     83
     84	0029			     A1:
     85	0029  33 C0		     XOR AX,AX
     86	002B  BB 000A		     MOV BX,10
     87
     88	002E			     A2:
     89	002E  8A 0C		     MOV CL, [SI]
     90	0030  80 F9 0D		     CMP CL, 0DH
     91	0033  74 2E		     JZ	AEND
     92
     93	0035  80 F9 30		     CMP CL,'0'
     94	0038  72 13		     JB	ERROR
     95	003A  80 F9 39		     CMP CL, '9'
     96	003D  77 0E		     JA	ERROR
     97
     98	003F  80 E9 30		     SUB CL, '0'
     99	0042  F7 EB		     IMUL BX
    100	0044  70 07		     JO	ERROR
    101	0046  03 C1		     ADD AX, CX
    102	0048  70 0D		     JO	MIN
    103	004A  46		     INC SI
    104	004B  EB E1		     JMP A2
    105
    106	004D			     ERROR:
    107	004D  BA 003Br		     LEA DX, ERRORMESSAGE
    108	0050  B4 09		     MOV AH,9H
    109	0052  CD 21		     INT 21H
    110	0054  EB 41 90		     JMP ENDL
    111
    112	0057			     MIN:
    113	0057  3D 8000		     CMP AX, MINNUM
    114	005A  75 F1		     JNE ERROR
Turbo Assembler	 Version 2.51	     12/11/21 14:50:22	    Page 3
2.asm



    115	005C  80 3E 006Cr 2D	     CMP BYTE PTR [DUMP	+2], "-"
    116	0061  75 EA		     JNE ERROR
    117
    118	0063			     AEND:
    119	0063  80 3E 0066r 01	     CMP NEGFLAG, 1
    120	0068  75 05		     JNE A3
    121	006A  F7 D8		     NEG AX
    122	006C  EB 01 90		     JMP A3
    123	006F			     A3:
    124	006F  A3 0068r		     MOV NUMBER,AX
    125				     CALCULATION
1   126	0072  C6 06 0067r 01	     MOV CORRECT, 1
1   127	0077  83 06 0068r 4E	     ADD NUMBER, 78
1   128	007C  70 03		     JO	??0000
1   129	007E  EB 0D 90		     JMP ??0001
1   130	0081			     ??0000:
1   131	0081  C6 06 0067r 00	     MOV CORRECT, 0
1   132	0086  BA 004Dr		     LEA DX, OFSUM
1   133	0089  B4 09		     MOV AH, 9H
1   134	008B  CD 21		     INT 21H
1   135	008D			     ??0001:
    136	008D  80 3E 0067r 01	     CMP CORRECT, 1
    137	0092  75 03		     JNE ENDL
    138	0094  E8 0001		     CALL DIGITOUTPUT
    139	0097			     ENDL:
    140	0097  CB		     RET
    141	0098			     MAIN ENDP
    142
    143
    144
    145	0098			     DIGITOUTPUT PROC NEAR
    146	0098  8B 1E 0068r	     MOV BX, NUMBER
    147	009C  0B DB		     OR	BX,BX
    148	009E  79 06		     JNS M1
    149	00A0  B0 2D		     MOV AL, '-'
    150	00A2  CD 29		     INT 29H
    151	00A4  F7 DB		     NEG BX
    152
    153	00A6			     M1:
    154	00A6  8B C3		     MOV AX,BX
    155	00A8  33 C9		     XOR CX, CX
    156	00AA  BB 000A		     MOV BX, 10
    157
    158	00AD			     M2:
    159	00AD  33 D2		     XOR DX,DX
    160	00AF  F7 F3		     DIV BX
    161	00B1  80 C2 30		     ADD DL, '0'
    162	00B4  52		     PUSH DX
    163	00B5  41		     INC CX
    164	00B6  85 C0		     TEST AX,AX
    165	00B8  75 F3		     JNZ M2
    166
    167	00BA			     M3:
    168	00BA  58		     POP AX
    169	00BB  CD 29		     INT 29H
    170	00BD  E2 FB		     LOOP M3
    171	00BF  C3		     RET
Turbo Assembler	 Version 2.51	     12/11/21 14:50:22	    Page 4
2.asm



    172	00C0			     DIGITOUTPUT ENDP
    173
    174
    175	00C0			     CSEG ENDS
    176				     END MAIN
Turbo Assembler	 Version 2.51	     12/11/21 14:50:22	    Page 5
Symbol Table




Symbol Name			  Type	 Value

??0000				  Near	 CSEG:0081
??0001				  Near	 CSEG:008D
??DATE				  Text	 "12/11/21"
??FILENAME			  Text	 "2	  "
??TIME				  Text	 "14:50:22"
??VERSION			  Number 0205
@CPU				  Text	 0101H
@CURSEG				  Text	 CSEG
@FILENAME			  Text	 2
@WORDSIZE			  Text	 2
A1				  Near	 CSEG:0029
A2				  Near	 CSEG:002E
A3				  Near	 CSEG:006F
AEND				  Near	 CSEG:0063
CORRECT				  Byte	 DSEG:0067
DIGITOUTPUT			  Near	 CSEG:0098
DUMP				  Byte	 DSEG:006A
ENDL				  Near	 CSEG:0097
ERROR				  Near	 CSEG:004D
ERRORMESSAGE			  Byte	 DSEG:003B
M1				  Near	 CSEG:00A6
M2				  Near	 CSEG:00AD
M3				  Near	 CSEG:00BA
MAIN				  Far	 CSEG:0000
MIN				  Near	 CSEG:0057
MINNUM				  Number -8000
NEGFLAG				  Byte	 DSEG:0066
NUMBER				  Word	 DSEG:0068
OFSUM				  Byte	 DSEG:004D
STARTMESSAGE			  Byte	 DSEG:0000

Macro Name

CALCULATION
INIT_DS

Groups & Segments		  Bit Size Align  Combine Class

CSEG				  16  00C0 Para	  Public  CODE
DSEG				  16  0073 Para	  Public  DATA
STSEG				  16  0140 Para	  Stack	  STACK
